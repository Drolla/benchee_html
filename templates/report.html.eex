<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf8">
    <script src="assets/javascripts/plotly-latest.min.js"></script>
  </head>
  <body>
    <%= for {name, _} <- suite.run_times do %>
      <div class="raw-run-times" data-job-name="<%= name %>"></canvas>
    <% end %>

    <script>
      var drawRunTimesChart = function(node, runTimeData) {

        var data = [
          {
            y: runTimeData,
            type: 'bar'
          }
        ];

        Plotly.newPlot(node, data)
      };

      var suite = <%= suite_json %>;
      var runTimes = suite.run_times;
      var statistics = suite.statistics;
      runTimeNodes = document.getElementsByClassName("raw-run-times");
      runTimesNodesArray = Array.from(runTimeNodes); // Oh JavaScript
      runTimesNodesArray.forEach(function(node) {
        var runTimeData = runTimes[node.getAttribute("data-job-name")];
        drawRunTimesChart(node, runTimeData);
      });

    </script>
  </body>
</html>
